(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports={container:"loading_container__1WaYx",animation:"loading_animation__3PRd_",loading:"loading_loading__3nYZo"}},function(e,t,a){e.exports={selectBox:"select_selectBox__2ROiH",selectField:"select_selectField__m8IaH",inputField:"select_inputField__29d8O"}},,,function(e,t,a){e.exports={container:"home_container__2YNhO"}},function(e,t,a){e.exports={table:"table_table__1q4vp"}},,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),u=a.n(c),l=a(3),i=a.n(l),o=a(4),s=a(2);function f(){return(f=Object(o.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,n=a.results){e.next=9;break}throw new Error("Erro ao buscar API");case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(){return f.apply(this,arguments)},p=Object(n.createContext)(),d={filters:{filterByName:{name:""},filterByNumericValues:[]}};var v=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(s.a)(a,2),u=c[0],l=c[1],f=Object(n.useState)(d),v=Object(s.a)(f,2),b=v[0],y=v[1],O=Object(n.useState)(!0),j=Object(s.a)(O,2),E=j[0],h=j[1];return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:t=e.sent,l(t),h(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(p.Provider,{value:{isLoading:E,data:u,filters:b,setFilters:y}},t)},b=a(13),y=a.n(b),O=a(15),j=a(9),E=a.n(j);var h=function(){return r.a.createElement("main",{className:E.a.container},r.a.createElement("div",{className:E.a.animation},r.a.createElement(O.a,{color:"#2A9D8F",size:"4rem"})),r.a.createElement("h2",null,"LOADING..."))},x=a(1),_=a(5),B=a(6),N=a(8),g=a(7),k=function(e){Object(N.a)(a,e);var t=Object(g.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.text;return r.a.createElement("option",{value:t},a)}}]),a}(r.a.Component),w=a(10),V=a.n(w),C=function(e){Object(N.a)(a,e);var t=Object(g.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this.props,t=e.dataTestid,a=e.name,n=e.options,c=e.value,u=e.filterDispatch;return r.a.createElement("label",{htmlFor:a,className:V.a.selectBox},r.a.createElement("select",{className:V.a.selectField,"data-testid":t,id:a,name:a,value:c,onChange:function(e){var t=e.target.value;return u({type:a,payload:t})}},n.map((function(e){return r.a.createElement(k,Object.assign({key:e.value},e))}))))}}]),a}(r.a.Component);function F(e,t){var a=t.type,n=t.payload;switch(a){case"column":return Object(x.a)(Object(x.a)({},e),{},{column:n});case"comparison":return Object(x.a)(Object(x.a)({},e),{},{comparison:n});case"findByValue":return Object(x.a)(Object(x.a)({},e),{},{findByValue:n});default:return e}}var S=[{name:"column",dataTestid:"column-filter",options:[{text:"population",value:"population"},{text:"orbital_period",value:"orbital_period"},{text:"diameter",value:"diameter"},{text:"rotation_period",value:"rotation_period"},{text:"surface_water",value:"surface_water"}]},{name:"comparison",dataTestid:"comparison-filter",options:[{text:"maior que",value:"maior que"},{text:"menor que",value:"menor que"},{text:"igual a",value:"igual a"}]}];var q=function(){var e=Object(n.useContext)(p),t=e.filters,a=e.setFilters,c=Object(n.useState)(""),u=Object(s.a)(c,2),l=u[0],i=u[1],o=Object(n.useReducer)(F,{column:"population",comparison:"more",findByValue:""}),f=Object(s.a)(o,2),m=f[0],d=f[1];return r.a.createElement("form",null,r.a.createElement("input",{"data-testid":"name-filter",type:"text",name:"findByName",value:l,onChange:function(e){var t=e.target.value;i(t),a((function(e){var a=e.filters;return{filters:Object(x.a)(Object(x.a)({},a),{},{filterByName:{name:t}})}}))}}),S.map((function(e){var a=function(e){var a=t.filters.filterByNumericValues;return e.filter((function(e){var t=e.value;return a.every((function(e){var a=e.column;return t!==a}))}))}(e.options);return r.a.createElement(C,Object.assign({},e,{key:e.name,filterDispatch:d,value:m[e.name],options:a}))})),r.a.createElement("input",{"data-testid":"value-filter",type:"text",name:"findByValue",value:m.findByValue,onChange:function(e){var t=e.target.value;return d({type:"findByValue",payload:t})}}),r.a.createElement("button",{"data-testid":"button-filter",type:"submit",onClick:function(e){e.preventDefault(),a((function(e){var t=e.filters,a=t.filterByNumericValues;return{filters:Object(x.a)(Object(x.a)({},t),{},{filterByNumericValues:a.concat(m)})}}))}},"Filter"))},A=a(14),D=a.n(A);var L=function(){var e=Object(n.useContext)(p),t=e.data,a=e.filters,c=Object(n.useState)([]),u=Object(s.a)(c,2),l=u[0],i=u[1],o=Object(n.useState)([]),f=Object(s.a)(o,2),m=f[0],d=f[1];return Object(n.useEffect)((function(){Object.keys(t[0]).filter((function(e){return"residents"!==e})).forEach((function(e){return i((function(t){return t.concat(e)}))}))}),[]),Object(n.useEffect)((function(){var e=a.filters,n=e.filterByName.name,r=e.filterByNumericValues,c=t;n&&(c=c.filter((function(e){var t=e.name;return(t=t.toLowerCase()).includes(n.toLowerCase())}))),r.forEach((function(e){var t=e.column,a=e.comparison,n=e.findByValue;c=c.filter((function(e){var r=Number(e[t]);switch(a){case"maior que":return r>n;case"menor que":return r<n;default:return r===Number(n)}}))})),d(c)}),[a,t]),r.a.createElement("table",{className:D.a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,l.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,m.map((function(e,t){return r.a.createElement("tr",{key:t},l.map((function(t,a){return r.a.createElement("td",{key:"".concat(e.name).concat(a)},e[t])})))}))))};var R=function(){var e=Object(n.useContext)(p),t=e.filters,a=e.setFilters,c=t.filters.filterByNumericValues,u=function(e){var t=e.target.previousSibling.textContent;a((function(e){var a=e.filters,n=a.filterByNumericValues.filter((function(e){var a=e.column;return!t.includes(a)}));return{filters:Object(x.a)(Object(x.a)({},a),{},{filterByNumericValues:n})}}))};return r.a.createElement("section",null,c.map((function(e,t){return r.a.createElement("div",{key:t,"data-testid":"filter",style:{display:"flex"}},r.a.createElement("p",{key:e.column},"{column: ".concat(e.column,",\n              comparison: ").concat(e.comparison,",\n              value: ").concat(e.findByValue,"}")),r.a.createElement("button",{type:"button",onClick:u},"X"))})))};var I=function(){return Object(n.useContext)(p).isLoading?r.a.createElement(h,null):r.a.createElement("div",{className:y.a.container},r.a.createElement("header",null,r.a.createElement("h1",null,"STAR WARS")),r.a.createElement(q,null),r.a.createElement(R,null),r.a.createElement(L,null))};var T=function(){return r.a.createElement(v,null,r.a.createElement(I,null))};a(22);u.a.render(r.a.createElement(T,null),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.a797896b.chunk.js.map