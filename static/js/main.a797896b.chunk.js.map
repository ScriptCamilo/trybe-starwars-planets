{"version":3,"sources":["components/Loading/loading.module.css","components/Select/select.module.css","pages/Home/home.module.css","pages/Home/components/Table/table.module.css","services/starWarsApi.js","context/Context.js","context/Provider.jsx","components/Loading/index.jsx","components/Select/components/Option/index.jsx","components/Select/index.jsx","helpers/selectData.js","pages/Home/components/Filter/index.jsx","pages/Home/components/Table/index.jsx","pages/Home/components/Infos/index.jsx","pages/Home/index.jsx","App.js","index.js"],"names":["module","exports","a","fetch","response","json","results","Error","starWarsApi","Context","createContext","INITIAL_FILTER","filters","filterByName","name","filterByNumericValues","Provider","children","useState","data","setData","setFilters","isLoading","setIsLoading","useEffect","planetsList","console","log","getPlanets","value","Loading","className","styles","container","animation","color","size","Option","this","props","text","React","Component","Select","dataTestid","options","filterDispatch","htmlFor","selectBox","selectField","data-testid","id","onChange","theValue","target","type","payload","map","option","key","selectReducer","state","column","comparison","findByValue","selects","Filter","useContext","setName","useReducer","filterState","prev","select","filter","every","filterOptions","onClick","event","preventDefault","numericValues","concat","Table","headers","setHeaders","filtered","setFiltered","Object","keys","forEach","header","planets","planetName","toLowerCase","includes","planet","planetColumnValue","Number","table","planetIndex","index","Infos","removeFilter","filterInfos","previousSibling","textContent","updatedFilter","numericFilter","style","display","Home","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a797896b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"loading_container__1WaYx\",\"animation\":\"loading_animation__3PRd_\",\"loading\":\"loading_loading__3nYZo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectBox\":\"select_selectBox__2ROiH\",\"selectField\":\"select_selectField__m8IaH\",\"inputField\":\"select_inputField__29d8O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"home_container__2YNhO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table_table__1q4vp\"};","async function starWarsApi() {\n  const response = await fetch('https://swapi-trybe.herokuapp.com/api/planets/');\n  const { results } = await response.json();\n\n  if (!results) throw new Error('Erro ao buscar API');\n\n  return results;\n}\n\nexport default starWarsApi;\n","import { createContext } from 'react';\n\nconst Context = createContext();\n\nexport default Context;\n","import React, { useEffect, useState } from 'react';\nimport { node } from 'prop-types';\n\nimport starWarsApi from '../services/starWarsApi';\n\nimport Context from './Context';\n\nconst INITIAL_FILTER = {\n  filters: {\n    filterByName: {\n      name: '',\n    },\n    filterByNumericValues: [],\n  },\n};\n\nfunction Provider({ children }) {\n  const [data, setData] = useState([]);\n  const [filters, setFilters] = useState(INITIAL_FILTER);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const getPlanets = async () => {\n      try {\n        const planetsList = await starWarsApi();\n        setData(planetsList);\n        setIsLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getPlanets();\n  }, []);\n\n  return (\n    <Context.Provider value={ { isLoading, data, filters, setFilters } }>\n      {children}\n    </Context.Provider>\n  );\n}\n\nProvider.propTypes = {\n  children: node.isRequired,\n};\n\nexport default Provider;\n","import React from 'react';\nimport { FaRegMoneyBillAlt } from 'react-icons/fa';\n\nimport styles from './loading.module.css';\n\nfunction Loading() {\n  return (\n    <main className={ styles.container }>\n      <div className={ styles.animation }>\n        <FaRegMoneyBillAlt color=\"#2A9D8F\" size=\"4rem\" />\n      </div>\n      <h2>LOADING...</h2>\n    </main>\n  );\n}\n\nexport default Loading;\n","import React from 'react';\nimport { string } from 'prop-types';\n\nclass Option extends React.Component {\n  render() {\n    const { value, text } = this.props;\n    return (\n      <option value={ value }>{text}</option>\n    );\n  }\n}\n\nOption.propTypes = {\n  value: string.isRequired,\n  text: string.isRequired,\n};\n\nexport default Option;\n","import React from 'react';\nimport PropTypes, { string, func, arrayOf } from 'prop-types';\n\nimport Option from './components/Option';\n\nimport styles from './select.module.css';\n\nclass Select extends React.Component {\n  render() {\n    const {\n      dataTestid,\n      name,\n      options,\n      value,\n      filterDispatch,\n    } = this.props;\n\n    return (\n      <label htmlFor={ name } className={ styles.selectBox }>\n        <select\n          className={ styles.selectField }\n          data-testid={ dataTestid }\n          id={ name }\n          name={ name }\n          value={ value }\n          onChange={ ({ target: { value: theValue } }) => (\n            filterDispatch({ type: name, payload: theValue })\n          ) }\n        >\n          {options.map((option) => <Option key={ option.value } { ...option } />)}\n        </select>\n      </label>\n    );\n  }\n}\n\nSelect.propTypes = {\n  dataTestid: string.isRequired,\n  name: string.isRequired,\n  options: arrayOf(PropTypes.object).isRequired,\n  value: string.isRequired,\n  filterDispatch: func.isRequired,\n};\n\nexport default Select;\n","export function selectReducer(state, { type, payload }) {\n  switch (type) {\n  case 'column':\n    return { ...state, column: payload };\n  case 'comparison':\n    return { ...state, comparison: payload };\n  case 'findByValue':\n    return { ...state, findByValue: payload };\n  default:\n    return state;\n  }\n}\n\nexport const selects = [\n  {\n    name: 'column',\n    dataTestid: 'column-filter',\n    options: [\n      {\n        text: 'population',\n        value: 'population',\n      },\n      {\n        text: 'orbital_period',\n        value: 'orbital_period',\n      },\n      {\n        text: 'diameter',\n        value: 'diameter',\n      },\n      {\n        text: 'rotation_period',\n        value: 'rotation_period',\n      },\n      {\n        text: 'surface_water',\n        value: 'surface_water',\n      },\n    ],\n  },\n  {\n    name: 'comparison',\n    dataTestid: 'comparison-filter',\n    options: [\n      {\n        text: 'maior que',\n        value: 'maior que',\n      },\n      {\n        text: 'menor que',\n        value: 'menor que',\n      },\n      {\n        text: 'igual a',\n        value: 'igual a',\n      },\n    ],\n  },\n];\n","import React, { useContext, useState, useReducer } from 'react';\n\nimport Context from '../../../../context/Context';\n\nimport Select from '../../../../components/Select';\nimport { selects, selectReducer } from '../../../../helpers/selectData';\n\nfunction Filter() {\n  const { filters, setFilters } = useContext(Context);\n  const [name, setName] = useState('');\n  const [filterState, filterDispatch] = useReducer(selectReducer, {\n    column: 'population',\n    comparison: 'more',\n    findByValue: '',\n  });\n\n  const handleName = ({ target: { value } }) => {\n    setName(value);\n    setFilters(({ filters: prev }) => ({\n      filters: {\n        ...prev,\n        filterByName: { name: value },\n      },\n    }));\n  };\n\n  const handleFilter = (event) => {\n    event.preventDefault();\n    setFilters(({ filters: prev }) => {\n      const { filterByNumericValues: numericValues } = prev;\n      return {\n        filters: {\n          ...prev,\n          filterByNumericValues: numericValues.concat(filterState),\n        },\n      };\n    });\n  };\n\n  const filterOptions = (options) => {\n    const { filters: { filterByNumericValues } } = filters;\n    const newOptions = options.filter(({ value }) => (\n      filterByNumericValues.every(({ column }) => value !== column)\n    ));\n\n    return newOptions;\n  };\n\n  return (\n    <form>\n      <input\n        data-testid=\"name-filter\"\n        type=\"text\"\n        name=\"findByName\"\n        value={ name }\n        onChange={ handleName }\n      />\n\n      {\n        selects.map((select) => {\n          const options = filterOptions(select.options);\n          return (\n            <Select\n              { ...select }\n              key={ select.name }\n              filterDispatch={ filterDispatch }\n              value={ filterState[select.name] }\n              options={ options }\n            />\n          );\n        })\n      }\n\n      <input\n        data-testid=\"value-filter\"\n        type=\"text\"\n        name=\"findByValue\"\n        value={ filterState.findByValue }\n        onChange={ ({ target: { value } }) => (\n          filterDispatch({ type: 'findByValue', payload: value })\n        ) }\n      />\n\n      <button\n        data-testid=\"button-filter\"\n        type=\"submit\"\n        onClick={ handleFilter }\n      >\n        Filter\n      </button>\n    </form>\n  );\n}\n\nexport default Filter;\n","import React, { useState, useContext, useEffect } from 'react';\n\nimport Context from '../../../../context/Context';\nimport styles from './table.module.css';\n\nfunction Table() {\n  const { data, filters } = useContext(Context);\n  const [headers, setHeaders] = useState([]);\n  const [filtered, setFiltered] = useState([]);\n\n  // It will set the table headers\n  useEffect(() => {\n    const tableHeaders = Object.keys(data[0]).filter((key) => key !== 'residents');\n    tableHeaders.forEach((header) => setHeaders((prev) => prev.concat(header)));\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // This will filter the planets\n  useEffect(() => {\n    const { filters: { filterByName: { name }, filterByNumericValues } } = filters;\n    let planets = data;\n\n    if (name) {\n      planets = planets.filter(({ name: planetName }) => {\n        planetName = planetName.toLowerCase();\n        return planetName.includes(name.toLowerCase());\n      });\n    }\n\n    filterByNumericValues.forEach(({ column, comparison, findByValue }) => {\n      planets = planets.filter((planet) => {\n        const planetColumnValue = Number(planet[column]);\n\n        switch (comparison) {\n        case 'maior que':\n          return planetColumnValue > findByValue;\n        case 'menor que':\n          return planetColumnValue < findByValue;\n        default:\n          return planetColumnValue === Number(findByValue);\n        }\n      });\n    });\n\n    setFiltered(planets);\n  }, [filters, data]);\n\n  return (\n    <table className={ styles.table }>\n      <thead>\n        <tr>\n          {headers.map((header) => (\n            <th key={ header }>{header}</th>\n          ))}\n        </tr>\n      </thead>\n\n      <tbody>\n        {filtered.map((planet, planetIndex) => (\n          <tr key={ planetIndex }>\n            {headers.map((header, index) => (\n              <td key={ `${planet.name}${index}` }>{planet[header]}</td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n\nexport default Table;\n","import React, { useContext } from 'react';\nimport Context from '../../../../context/Context';\n\nfunction Infos() {\n  const { filters, setFilters } = useContext(Context);\n  const { filters: { filterByNumericValues } } = filters;\n\n  const removeFilter = ({ target }) => {\n    const filterInfos = target.previousSibling.textContent;\n\n    setFilters(({ filters: prev }) => {\n      const { filterByNumericValues: numericValues } = prev;\n\n      const updatedFilter = numericValues.filter(({ column }) => (\n        !filterInfos.includes(column)\n      ));\n\n      return {\n        filters: {\n          ...prev,\n          filterByNumericValues: updatedFilter,\n        },\n      };\n    });\n  };\n\n  return (\n    <section>\n      {filterByNumericValues.map((numericFilter, index) => (\n        <div key={ index } data-testid=\"filter\" style={ { display: 'flex' } }>\n          <p key={ numericFilter.column }>\n            {\n              `{column: ${numericFilter.column},\n              comparison: ${numericFilter.comparison},\n              value: ${numericFilter.findByValue}}`\n            }\n          </p>\n          <button type=\"button\" onClick={ removeFilter }>X</button>\n        </div>\n      ))}\n    </section>\n  );\n}\n\nexport default Infos;\n","import React, { useContext } from 'react';\n\nimport Context from '../../context/Context';\nimport styles from './home.module.css';\n\nimport Loading from '../../components/Loading';\nimport Filter from './components/Filter';\nimport Table from './components/Table';\nimport Infos from './components/Infos';\n\nfunction Home() {\n  const { isLoading } = useContext(Context);\n\n  if (isLoading) return <Loading />;\n\n  return (\n    <div className={ styles.container }>\n      <header>\n        <h1>STAR WARS</h1>\n      </header>\n\n      <Filter />\n\n      <Infos />\n\n      <Table />\n    </div>\n  );\n}\n\nexport default Home;\n","import React from 'react';\n\nimport Provider from './context/Provider';\nimport Home from './pages/Home';\n\nfunction App() {\n  return (\n    <Provider>\n      <Home />\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/global.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}